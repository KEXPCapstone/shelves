<div class="release-detail-container">
    <div class="release-overview" *ngIf="release">
        <div class="release-album-cover">
            <img class="album-image"
            [src]="getArt()"
            alt={{release.title}}
            onerror="this.style.display='none'">
            <div class="album-dialog-ctrl">
                <button class="dialog-ctrl-btn" mat-button (click)="openNotesDialog()"><mat-icon>comment</mat-icon></button>
                <div class="flex-spacer"></div>
                <button class="dialog-ctrl-btn" mat-button (click)="openShelfAddDialog()"><mat-icon>add_circle</mat-icon></button>
            </div>        
        </div>
        <div class="release-info">
            <div class="release-title">
                <h1>{{release.title}}</h1>
                <h3 mat-line>by
                    <a class="kexp-orange" routerLink="/library/artists/{{release.KEXPReleaseArtistCredit.charAt(0) | lowercase}}/{{release.artistCredit[0].artist.id}}">
                        {{release.KEXPReleaseArtistCredit}}
                    </a>
                </h3>
                <h3 mat-line>
                    <span *ngIf="release.date.length == 4">released in <span class="kexp-orange">{{release.date}}</span></span>
                    <span *ngIf="release.date.length > 4">released <span class="kexp-orange">{{release.date | date:'longDate'}}</span></span>
                </h3>
                <h3 *ngIf="release.labelInfo.length > 0" mat-line>
                    on
                    <a class="kexp-orange" *ngFor="let label of release.labelInfo" routerLink="/library/labels/{{label.label.name.charAt(0) | lowercase}}/{{label.label.id}}">
                        {{ label.label.name }}
                    </a>
                </h3>
            </div>
            <mat-divider></mat-divider>
            <app-related-releases *ngIf="release" [release]="release"></app-related-releases>
        </div>
    </div>
    <section *ngIf="release" class="tracklist-container">
        <h3>Tracklist</h3>
        <div class="tracklist">
            <mat-list class="tracklist">
                <!-- handles multiple discs/sides -->
                <div class="track-group" *ngFor="let disc of release.media; let i = index">
                    <h3 *ngIf="release.media.length > 1" matSubheader>{{release.media[i].title}} - {{release.media[i].format}}</h3>
                    <mat-list-item *ngFor="let track of release.media[i].tracks; last as last">
                        <div class="track-title"><span>{{track.number}}</span> {{track.title}}</div>
                        <div class="track-spacer"></div>
                        <div class="track-length">{{track.length | date:'mm:ss'}}</div>
                        <mat-divider [inset]="true" *ngIf="!last"></mat-divider>
                    </mat-list-item>
                </div>
            </mat-list>
        </div>
    </section>
</div>
